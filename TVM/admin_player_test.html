<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-8" />
<title>player</title>
<script type="text/javascript" src="js/SWFObj.js" language="javascript"></script>
<script type="text/javascript" src="js/WMPInterface.js" language="javascript"></script>
<script type="text/javascript" src="js/FlashUtils.js" language="javascript"></script>
<script type="text/javascript" src="js/WMPObject.js" language="javascript"></script>
<script type="text/javascript" src="js/Player.js" language="javascript"></script>
<script type="text/javascript"  language="javascript">
//------------------------------------------------text/javascript" src="js/SWFObj.js" language="javascript"></script>
<script type="text/javascript" src="js/WMPInterface.js" language="javascript"></script>
<script type="text/javascript" src="js/FlashUtils.js" language="javascript"></script>
<script type="text/javascript" src="js/WMPObject.js" language="javascript"></script>
<script type="text/javascript" src="js/Player.js" language="javascript"></script>
<script type="text/javascript"  language="javascript">
//------------------------------------------------
//---------------------- FLASH OBJECT ------------
/*
var MMPlayerType = (isIE == true) ? "ActiveX" : "PlugIn";
var MMredirectURL = window.location;
document.title = document.title.slice(0, 47) + " - Flash Player Installation";
var MMdoctitle = document.title;
var gotRequiredVersion = isFlashMinRequiredVersion("10,0,0,0");
var flashMovie = gotRequiredVersion ? "flash/gibraltar_player" : "flash/playerProductInstall";
*/
//*
var MMPlayerType = (isIE == true) ? "ActiveX" : "PlugIn";
var gotRequiredVersion = isFlashMinRequiredVersion("10,0,0,0");
var flashMovie = "flash/admin_player_single";
//*/
//var flashVarsStr = 'no_cache=1&media_id=20123&auto_play=true&file_format=FLV&sub_file_format=GIB&category_id=0&pic_size1=110x60&pic_size2=622x350&pic_size3=90x50&pic_size4=52x70&pic_size5=95x130&file_quality=HIGH&with_channels=true';
//var flashVarsStr = 'pic_size5_format=POSTER&pic_size5_quality=HIGH&pic_size3_format=POSTER&pic_size3_quality=HIGH&pic_size2_format=POSTER&pic_size2_quality=HIGH&auto_play=true&file_format=FLV&sub_file_format=gib&pic_size1=110x60&pic_size2=622x350&pic_size3=106x56&pic_size4=95x130&pic_size5=106x56&file_quality=HIGH&with_channels=true&dir=rtl&error_clip=1&no_cache=0&category_id=0&starting_channel_id=26669&Prod=1&autoInit=1';
//var flashVarsStr = "Prod=-1&pic_size5_format=POSTER&pic_size5_quality=HIGH&pic_size3_format=POSTER&pic_size3_quality=HIGH&pic_size2_format=POSTER&pic_size2_quality=HIGH&auto_play=true&file_format=FLV&sub_file_format=gib&pic_size1=110x60&pic_size2=622x350&pic_size3=106x56&pic_size4=95x130&pic_size5=106x56&file_quality=HIGH&with_channels=true&dir=rtl&error_clip=1&no_cache=0&category_id=222&starting_channel_id=26553&autoInit=1";
var flashVarsStr = "relative_server_path=false&server_environment_url=https://vod.orange.co.il/papi.aspx&media_id=40301&auto_play=false&player_un=ocontent_site_prod&player_pass=ocontent_site_prod&file_format=GIB&file_quality=HIGH&&no_cache=1";
if(!gotRequiredVersion)
	flashVarsStr = 'MMredirectURL='+MMredirectURL+'&MMplayerType='+MMPlayerType+'&MMdoctitle='+MMdoctitle;
var flashObj = new SWFObj(
'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0',
'width', '100%',
'height', '80%',
'src', flashMovie,
'quality', 'high',
'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
'align', 'middle',
'play', 'true',
'loop', 'true',
'scale', 'showall',
'wmode', 'window',
'devicefont', 'false',
'id', 'player',
'bgcolor', '#000000',
'name', 'player',
'menu', 'true',
'allowFullScreen', 'true',
'allowScriptAccess','always',
'movie', flashMovie,
'salign', '',
'flashVars', flashVarsStr
);
//------------------------------------------------
//---------------------- WMP OBJECT --------------
var wmpVid = new WMPObject("", "WMPObj", 0, 0);
wmpVid.addParam('TYPE', 'application/x-mplayer2');
wmpVid.addParam('PLUGINSPACE', 'http://www.microsoft.com/Windows/MediaPlayer/download/default.asp');
wmpVid.addParam('Autostart', 'false'); 
wmpVid.addParam('uiMode', 'none'); 
wmpVid.addParam('windowlessVideo', 'false'); 
wmpVid.addParam('stretchToFit', 'false');
wmpVid.addParam('ShowControls', '0');
//------------------------------------------------

function flash_postInit(){
	//alert("flash_postInit");
}

function initPage(){
	flashObj.write("flashDiv");
	wmpVid.write("WMPDiv");
	var interface = createWMPInterface();
	addInterfaceToCall(interface, "VideoInterface");
	interface.init(document.getElementById("WMPObj"),document.getElementById("WMPDiv"),document.getElementsByName("player")[0],document.getElementById("flashDiv"));
	VG = null;
	getFlashObject().wmode = "window";
	//getFlashObject().style.display = "none";
	//alert(getFlashObject().wmode);
	//traceFromFlash("a", "b");
}

//Dummy functions --------------------------

function traceFromFlash(type, msg){
	alert("traceFromFlash >> " + type +"\n" + msg);
}


function getFlashObject(){
	return document.getElementsByName("player")[0];
}

// From js to flash ------------------------------

function getFlashPersistanceFromFlash(){  
	var flashObj = getFlashObject(); 
	var ret = flashObj.getSessionString();
	alert(ret);
    return ret;
}

function gotoPurchasePackageInFlash(packageID,imageURL, packageName, price, duration){
	var flashObj = getFlashObject(); 
	flashObj.purchasePackage(packageID, imageURL, packageName, price, duration);
}

function gotoViewItem(assetID){

}

function gotoPurchaseItemInFlash(assetID){
	var flashObj = getFlashObject(); 
	flashObj.purchaseItem(assetID);
}

function testPurchase(){
	var txt = document.getElementById("purchase_txt");
	gotoPurchaseItemInFlash(txt.value)
}

function testPurchasePackage(){
	gotoPurchasePackageInFlash('953','http://192.117.179.159/videopackageimages/953/pack.jpg', 'Disney Package', '29.9', '30 days');
}

// -----------------------------------------------

// From flash to js ------------------------------

function changeScreenSaverStatus(b){
	//alert("changeScreenSaverStatus >> " + b);
}

function gotoLoginFromFlash(){
	//alert("gotoLoginFromFlash");
	//window.location = "http://vmtvincilab.partnergsm.co.il/Loginpage/login.asp?TYPE=100663297&REALMOID=06-c177a8eb-d66a-4195-b56e-4c4e98907118&GUID=0&SMAUTHREASON=0&METHOD=GET&SMAGENTNAME=vmtvincilab.partnergsm.co.il&TARGET=-SM-HTTP%3a%2f%2fvmtvincilab%2epartnergsm%2eco%2eil%2fprotected%2fLogin%2easpx%3fCallerURL%3dhttp%3a%2f%2fvmtvincilab%2epartnergsm%2eco%2eil%2fhomepage%2easpx";
	window.location = "http://vod.orange.co.il/Sharon/dummylogin.aspx";
    //gotoLogin("",getFlashPersistanceValue());
}

function gotoItemPageFromFlash(mediaID){
	alert("gotoItemPageFromFlash >> " + mediaID);
}

function getFlashPersistanceByFlash(){
    //return "ocationPath=247,26540:playMedia=33167:playChannel=26540"
	return "";
	//return FlashPersistData;
}

function TvinciPlayerAddToLog(dd)
{

}
function getCustomChannelRequest(){
	var xmlStr = '<root><request type="search_media"><search_data cut_with="or"><channel start_index="0" media_count="20"/><cut_values><meta name="Asset ID" value="tspTest3"/></cut_values><order_values/></search_data><params with_info="false"/></request><flashvars sub_file_format="gib" category_id="0" auto_play="true" pic_size2="622x350" with_channels="true" media_id="2479" pic_size1="110x60" file_quality="HIGH" no_cache="1" file_format="FLV" player_un="ocontent_site" player_pass="ocontent_site"/></root>';	
	return xmlStr;
}

// -----------------------------------------------


</script>
</head>
<body bgcolor="#545454" style="margin:0px;" onload="initPage();">
<form>
<script type="text/javascript">
   function GetVG()
      {

        var elem = document.frames['NDSFrame'];
        
        if (elem != null && elem != 'undefined')
        {
            return elem.GetVG();                            
        }else
        {
            return null;
        }
      
      }
         
</script>

<iframe id="NDSFrame" src="NDSPlayer/NDSInitialize.aspx"></iframe>

	<div style="position:absolute;z-index:100;top:0;left:0;background-color:#FF9900;width:40;height:30;"></div>
	<div id="WMPDiv" style="position:absolute;z-index:1;top:0;left:0;background-color:#FF9900;width:1;height:1;"></div>
	<div id="flashDiv" style="position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;"></div>
	<iframe id="the_installer" src="" style="display: none;"></iframe>
	<!--
	<textarea id="input_txt" style="position:absolute;z-index:2;top:500;left:10;border:#000000 1px solid;width:550px;height:100px;font-size:12px;font-family:Courier New;color:#006600"></textarea>
	-->
	<input type="button" value="getFlashPersistanceFromFlash()" onclick="getFlashPersistanceFromFlash();" style="position:absolute;z-index:3;top:500;left:10;"/>
	<input type="button" value="testPurchase" onclick="testPurchase()" style="position:absolute;z-index:4;top:525;left:10;"/>
	<input type="textfield" id="purchase_txt" value="263" style="position:absolute;z-index:5;top:550;left:10;"/>
	<input type="button" value="testPurchasePackage" onclick="testPurchasePackage()" style="position:absolute;z-index:6;top:575;left:10;"/>
</form>
</body>
</html>
