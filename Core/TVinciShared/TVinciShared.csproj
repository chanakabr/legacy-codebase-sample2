<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup Condition=" '$(OS)' != 'Windows_NT' ">
		<TargetFramework>netcoreapp3.1</TargetFramework>
	</PropertyGroup>
	<PropertyGroup Condition=" '$(OS)' == 'Windows_NT' ">
		<TargetFrameworks>netcoreapp3.1;net48</TargetFrameworks>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="DeepCloner" Version="0.10.2" />
		<PackageReference Include="Microsoft.AspNet.WebApi.Client" Version="5.2.7" />
		<PackageReference Include="Microsoft.AspNetCore.Http.Features" Version="2.2.0" />
		<PackageReference Include="SharpZipLib" Version="1.1.0" />
		<PackageReference Include="System.ServiceModel.Duplex" Version="4.8.1" />
		<PackageReference Include="System.ServiceModel.Http" Version="4.8.1" />
		<PackageReference Include="System.ServiceModel.NetTcp" Version="4.8.1" />
		<PackageReference Include="System.ServiceModel.Security" Version="4.8.1" />
	</ItemGroup>

	<ItemGroup Condition="'$(TargetFramework)' == 'net48'">
		<Reference Include="Interop.CUWMAuthTickets">
			<HintPath>..\External\Interop.CUWMAuthTickets.dll</HintPath>
			<EmbedInteropTypes>False</EmbedInteropTypes>
		</Reference>
		<Reference Include="System.configuration" />
		<Reference Include="System.EnterpriseServices" />
		<Reference Include="System.Runtime.Caching" />
		<Reference Include="System.Security" />
		<Reference Include="System.ServiceModel" />
		<Reference Include="System.Web" />
		<Reference Include="System.Web.Extensions" />
		<Reference Include="System.Web.Services" />
		<Reference Include="System.Windows.Forms" />
	</ItemGroup>

	<ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp3.1'">
		<PackageReference Include="Microsoft.AspNetCore.WebUtilities" Version="2.2.0" />
		<PackageReference Include="Microsoft.AspNetCore.Hosting.Abstractions" Version="2.2.0" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\ApiObjects\ApiObjects.csproj" />
		<ProjectReference Include="..\AkamaiTokenGenerator\AkamaiTokenGenerator.csproj" />
		<ProjectReference Include="..\CachingManager\CachingManager.csproj" />
		<ProjectReference Include="..\CachingProvider\CachingProvider.csproj" />
		<ProjectReference Include="..\CouchbaseManager\CouchbaseManager.csproj" />
		<ProjectReference Include="..\DAL\DAL.csproj" />
		<ProjectReference Include="..\EventBus.Abstraction\EventBus.Abstraction.csproj" />
		<ProjectReference Include="..\EventBus.RabbitMQ\EventBus.RabbitMQ.csproj" />
		<ProjectReference Include="..\LLNWMediaVault\LLNWMediaVault.csproj" />
		<ProjectReference Include="..\ODBCWrapper\ODBCWrapper.csproj" />
		<ProjectReference Include="..\QueueWrapper\QueueWrapper.csproj" />
		<ProjectReference Include="..\ServiceExtensions\ServiceExtensions.csproj" />
		<ProjectReference Include="..\Uploader\Uploader.csproj" />
	</ItemGroup>
	
	<!-- This is a workaround that will allow TVM website project to build, if you read this an 
	TVM no longer exist please remove this <Target Name="GetTargetPath"... element-->
	<Target Name="GetTargetPath" Returns="@(_FakeOutputPath)">
		<ItemGroup>
			<_FakeOutputPath Include="$(MSBuildProjectDirectory)\$(PackageOutputPath)\$(AssemblyName).UNK" />
		</ItemGroup>
	</Target>

</Project>